apiVersion: containerservice.azure.com/v1api20231001
kind: ManagedCluster
metadata:
  name: aso-sample-aks
  namespace: default
spec:
  kubernetesVersion: 1.27.3
  location: westus2
  owner:
    name: aso-sample-rg
  dnsPrefix: aso
  agentPoolProfiles:
    - name: agentpool
      count: 2
      vmSize: Standard_B4ms
      osType: Linux
      osSKU: AzureLinux
      mode: System
  identity:
    type: SystemAssigned
  autoUpgradeProfile:
    upgradeChannel: NodeImage
  enableRBAC: true
  addonProfiles:
    azurepolicy:
      enabled: true
  operatorSpec:
    configMaps:
      principalId:
        name: cluster-configmap
        key: principalId
