// Code generated by azure-service-operator-codegen. DO NOT EDIT.
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
package storage

import (
	// v20231001s "github.com/Azure/azure-service-operator/v2/api/containerservice/v1api20231001/storage"
	// v20231001sc "github.com/Azure/azure-service-operator/v2/api/containerservice/v1api20231001/storage/compat"
	// v20240901s "github.com/Azure/azure-service-operator/v2/api/containerservice/v1api20240901/storage"
	v20240901sc "github.com/Azure/azure-service-operator/v2/api/containerservice/v1api20240901/storage/compat"
	// v20250801s "github.com/Azure/azure-service-operator/v2/api/containerservice/v1api20250801/storage"
	"github.com/Azure/azure-service-operator/v2/internal/util/to"
	. "github.com/onsi/gomega"

	"testing"
)

func Test_AgentPoolGPUProfile_ToConversion(t *testing.T) {
	t.Parallel()
	g := NewGomegaWithT(t)
	src := AgentPoolGPUProfile{
		InstallGPUDriver: to.Ptr(true),
	}
	dst := &v20240901sc.GPUProfile{}
	err := src.AssignProperties_To_GPUProfile(dst)
	g.Expect(err).ToNot(HaveOccurred())
	g.Expect(dst.InstallGPUDriver).To(BeNil()) // Ensure that the old location is not set
}

func Test_AgentPoolGPUProfile_FromConversion(t *testing.T) {
	t.Parallel()
	g := NewGomegaWithT(t)
	src := &v20240901sc.GPUProfile{
		PropertyBag: map[string]string{
			"Driver": "Install",
		},
	}
	dst := AgentPoolGPUProfile{}
	err := dst.AssignProperties_From_GPUProfile(src)
	g.Expect(err).ToNot(HaveOccurred())
	g.Expect(dst.InstallGPUDriver).ToNot(BeNil())
	g.Expect(*dst.InstallGPUDriver).To(BeTrue())
	g.Expect(dst.PropertyBag).To(HaveLen(0)) // Ensure that the property bag doesn't have "Driver", it was consumed by the conversion
}
