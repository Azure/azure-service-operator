// Code generated by azure-service-operator-codegen. DO NOT EDIT.
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
package storage

import (
	v20240901sc "github.com/Azure/azure-service-operator/v2/api/containerservice/v1api20240901/storage/compat"
	"github.com/Azure/azure-service-operator/v2/internal/util/to"
	"github.com/Azure/azure-service-operator/v2/pkg/genruntime"
)

var _ augmentConversionForAgentPoolGPUProfile = &AgentPoolGPUProfile{}

func (gpuProfile *AgentPoolGPUProfile) AssignPropertiesFrom(src *v20240901sc.GPUProfile) error {
	// Convert Driver -> InstallGPUDriver
	if gpuProfile.PropertyBag.Contains("Driver") {
		driver := gpuProfile.PropertyBag["Driver"]

		gpuProfile.PropertyBag.Remove("Driver")
		if driver == "Install" {
			gpuProfile.InstallGPUDriver = to.Ptr(true)
		} else if driver == "None" {
			gpuProfile.InstallGPUDriver = to.Ptr(false)
		}
		// anything else is unexpected
	}

	return nil
}

func (gpuProfile *AgentPoolGPUProfile) AssignPropertiesTo(dst *v20240901sc.GPUProfile) error {
	// Convert InstallGPUDriver -> Driver
	if gpuProfile.InstallGPUDriver != nil {
		if dst.PropertyBag == nil {
			dst.PropertyBag = genruntime.NewPropertyBag(gpuProfile.PropertyBag)
		}

		dst.InstallGPUDriver = nil // clear the "old" field as it shouldn't be used

		if *gpuProfile.InstallGPUDriver {
			dst.PropertyBag.Add("Driver", "Install")
		} else {
			dst.PropertyBag.Add("Driver", "None")
		}
	}

	return nil
}

var _ augmentConversionForAgentPoolGPUProfile_STATUS = &AgentPoolGPUProfile_STATUS{}

func (gpuProfile *AgentPoolGPUProfile_STATUS) AssignPropertiesFrom(src *v20240901sc.GPUProfile_STATUS) error {
	// Convert Driver -> InstallGPUDriver
	if gpuProfile.PropertyBag.Contains("Driver") {
		driver := gpuProfile.PropertyBag["Driver"]

		gpuProfile.PropertyBag.Remove("Driver")
		if driver == "Install" {
			gpuProfile.InstallGPUDriver = to.Ptr(true)
		} else if driver == "None" {
			gpuProfile.InstallGPUDriver = to.Ptr(false)
		}
		// anything else is unexpected
	}

	return nil
}

func (gpuProfile *AgentPoolGPUProfile_STATUS) AssignPropertiesTo(dst *v20240901sc.GPUProfile_STATUS) error {
	// Convert InstallGPUDriver -> Driver
	if gpuProfile.InstallGPUDriver != nil {
		if dst.PropertyBag == nil {
			dst.PropertyBag = genruntime.NewPropertyBag(gpuProfile.PropertyBag)
		}

		dst.InstallGPUDriver = nil // clear the "old" field as it shouldn't be used

		if *gpuProfile.InstallGPUDriver {
			dst.PropertyBag.Add("Driver", "Install")
		} else {
			dst.PropertyBag.Add("Driver", "None")
		}
	}

	return nil
}
