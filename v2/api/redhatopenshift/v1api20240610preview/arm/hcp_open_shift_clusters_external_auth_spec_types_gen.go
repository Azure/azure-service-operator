// Code generated by azure-service-operator-codegen. DO NOT EDIT.
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
package arm

import "github.com/Azure/azure-service-operator/v2/pkg/genruntime"

type HcpOpenShiftClustersExternalAuth_Spec struct {
	Name string `json:"name,omitempty"`

	// Properties: The resource-specific properties for this resource.
	Properties *ExternalAuthProperties `json:"properties,omitempty"`
}

var _ genruntime.ARMResourceSpec = &HcpOpenShiftClustersExternalAuth_Spec{}

// GetAPIVersion returns the ARM API version of the resource. This is always "2024-06-10-preview"
func (auth HcpOpenShiftClustersExternalAuth_Spec) GetAPIVersion() string {
	return "2024-06-10-preview"
}

// GetName returns the Name of the resource
func (auth *HcpOpenShiftClustersExternalAuth_Spec) GetName() string {
	return auth.Name
}

// GetType returns the ARM Type of the resource. This is always "Microsoft.RedHatOpenShift/hcpOpenShiftClusters/externalAuths"
func (auth *HcpOpenShiftClustersExternalAuth_Spec) GetType() string {
	return "Microsoft.RedHatOpenShift/hcpOpenShiftClusters/externalAuths"
}

// External Auth profile
type ExternalAuthProperties struct {
	// Claim: External Auth claim
	// This configures how claims are validated and applied.
	Claim *ExternalAuthClaimProfile `json:"claim,omitempty"`

	// Clients: External Auth OIDC clients
	// There must not be more than 20 entries and entries must have unique namespace/name pairs.
	Clients []ExternalAuthClientProfile `json:"clients,omitempty"`

	// Issuer: Token Issuer profile
	Issuer *TokenIssuerProfile `json:"issuer,omitempty"`
}

// External Auth claim profile
type ExternalAuthClaimProfile struct {
	// Mappings: The claim mappings
	Mappings *TokenClaimMappingsProfile `json:"mappings,omitempty"`

	// ValidationRules: The claim validation rules
	ValidationRules []TokenClaimValidationRule `json:"validationRules,omitempty"`
}

// External Auth client profile
// This configures how on-cluster, platform clients should request tokens from the identity
// provider.
type ExternalAuthClientProfile struct {
	// ClientId: External Auth client id
	// The clientId must appear in the audience field of the TokenIssuerProfile.
	ClientId *string `json:"clientId,omitempty"`

	// Component: External Auth client component
	Component *ExternalAuthClientComponentProfile `json:"component,omitempty"`

	// ExtraScopes: external auth client scopes
	// This is useful if you have configured claim mappings that requires specific
	// scopes to be requested beyond the standard OIDC scopes.
	// When omitted, no additional scopes are requested.
	ExtraScopes []string `json:"extraScopes,omitempty"`

	// Type: Determines the OIDC provider client type.
	Type *ExternalAuthClientType `json:"type,omitempty"`
}

// Token issuer profile
// This configures how the platform interacts with the identity provider and
// how tokens issued from
// the identity provider are evaluated by the Kubernetes API server.
type TokenIssuerProfile struct {
	// Audiences: This configures the acceptable audiences the JWT token, issued by the identity
	// provider, must be issued to. At least one of the entries must match the
	// 'aud' claim in the JWT token.
	// audiences must contain at least one entry and must not exceed ten entries.
	Audiences []string `json:"audiences,omitempty"`

	// Ca: The issuer of the token
	// Certificate bundle to use to validate server certificates for the configured URL.
	// It must be PEM encoded and when not specified, the system trust is used.
	Ca *string `json:"ca,omitempty"`

	// Url: This configures the URL used to issue tokens by the identity provider.
	// The Kubernetes API server determines how authentication tokens should be handled
	// by matching the 'iss' claim in the JWT to the issuerURL of configured identity providers.
	// issuerURL must use the 'https' scheme.
	Url *string `json:"url,omitempty"`
}

// External Auth component profile
// Must have unique namespace/name pairs.
type ExternalAuthClientComponentProfile struct {
	// AuthClientNamespace: The namespace of the external Auth client
	// This specifies the namespace in which the platform component being configured
	// to use the identity provider as an authentication mode is running.
	// It is used in combination with name as a unique identifier.
	AuthClientNamespace *string `json:"authClientNamespace,omitempty"`

	// Name: The name of the external auth client
	// This specifies the name of the platform component being configured to use
	// the identity provider as an authentication mode.
	// It is used in combination with namespace as a unique identifier.
	Name *string `json:"name,omitempty"`
}

// Representation of the possible values of an external authentication client's type
// +kubebuilder:validation:Enum={"Confidential","Public"}
type ExternalAuthClientType string

const (
	ExternalAuthClientType_Confidential = ExternalAuthClientType("Confidential")
	ExternalAuthClientType_Public       = ExternalAuthClientType("Public")
)

// Mapping from string to ExternalAuthClientType
var externalAuthClientType_Values = map[string]ExternalAuthClientType{
	"confidential": ExternalAuthClientType_Confidential,
	"public":       ExternalAuthClientType_Public,
}

// External Auth claim mappings profile.
// At a minimum username or groups must be defined.
type TokenClaimMappingsProfile struct {
	// Groups: The claim mappings groups.
	Groups *GroupClaimProfile `json:"groups,omitempty"`

	// Username: The claim mappings username.
	Username *UsernameClaimProfile `json:"username,omitempty"`
}

// External Auth claim validation rule
type TokenClaimValidationRule struct {
	// RequiredClaim: The required claim rule to be applied.
	RequiredClaim *TokenRequiredClaim `json:"requiredClaim,omitempty"`

	// Type: This configures the type of the validation rule.
	// It defaults to "RequiredClaim"
	Type *TokenClaimValidationRule_Type `json:"type,omitempty"`
}

// External Auth claim profile
// This configures how the groups of a cluster identity should be constructed
// from the claims
// in a JWT token issued by the identity provider. When
// referencing a claim, if the claim is present in the JWT token, its
// value
// must be a list of groups separated by a comma (',').
// For example - '"example"' and '"exampleOne", "exampleTwo",
// "exampleThree"' are valid claim values.
type GroupClaimProfile struct {
	// Claim: Claim name of the external profile
	Claim *string `json:"claim,omitempty"`

	// Prefix: Prefix for the claim external profile
	// If this is specified prefixPolicy will be set to "Prefix" by default
	Prefix *string `json:"prefix,omitempty"`
}

// +kubebuilder:validation:Enum={"RequiredClaim"}
type TokenClaimValidationRule_Type string

const TokenClaimValidationRule_Type_RequiredClaim = TokenClaimValidationRule_Type("RequiredClaim")

// Mapping from string to TokenClaimValidationRule_Type
var tokenClaimValidationRule_Type_Values = map[string]TokenClaimValidationRule_Type{
	"requiredclaim": TokenClaimValidationRule_Type_RequiredClaim,
}

// Token required claim validation rule.
type TokenRequiredClaim struct {
	// Claim: Claim name for the validation profile
	// claim is a required field that configures the name of the required claim.
	Claim *string `json:"claim,omitempty"`

	// RequiredValue: Required value
	// requiredValue is a required field that configures the value that 'claim' must
	// have when taken from the incoming JWT claims.
	// If the value in the JWT claims does not match, the token
	// will be rejected for authentication.
	RequiredValue *string `json:"requiredValue,omitempty"`
}

// External Auth claim profile
// This configures how the username of a cluster identity should be constructed
// from the claims
// in a JWT token issued by the identity provider.
type UsernameClaimProfile struct {
	// Claim: Claim name of the external profile
	Claim *string `json:"claim,omitempty"`

	// Prefix: Prefix for the claim external profile
	// Must be set when the prefixPolicy field is set to 'Prefix' and must be unset
	// otherwise.
	Prefix *string `json:"prefix,omitempty"`

	// PrefixPolicy: Prefix policy is an optional field that configures how a prefix should be
	// applied to the value of the JWT claim specified in the 'claim' field.
	// Allowed values are 'Prefix', 'NoPrefix', and 'None'.
	// When set to 'Prefix', the value specified in the prefix field will be
	// prepended to the value of the JWT claim.
	// The prefix field must be set when prefixPolicy is 'Prefix'.
	// When set to 'NoPrefix', no prefix will be prepended to the value
	// of the JWT claim.
	// When set to 'None', this means no opinion and the platform is left to choose
	// any prefixes that are applied which is subject to change over time.
	// Currently, the platform prepends `{issuerURL}#` to the value of the JWT claim
	// when the claim is not 'email'.
	// As an example, consider the following scenario:
	// `prefix` is unset, `issuerURL` is set to `https://myoidc.tld`,
	// the JWT claims include "username":"userA" and "email":"userA
	PrefixPolicy *UsernameClaimPrefixPolicy `json:"prefixPolicy,omitempty"`
}

// UsernameClaimPrefixPolicy configures whether to add a prefix to a JWT claim.
// +kubebuilder:validation:Enum={"NoPrefix","None","Prefix"}
type UsernameClaimPrefixPolicy string

const (
	UsernameClaimPrefixPolicy_NoPrefix = UsernameClaimPrefixPolicy("NoPrefix")
	UsernameClaimPrefixPolicy_None     = UsernameClaimPrefixPolicy("None")
	UsernameClaimPrefixPolicy_Prefix   = UsernameClaimPrefixPolicy("Prefix")
)

// Mapping from string to UsernameClaimPrefixPolicy
var usernameClaimPrefixPolicy_Values = map[string]UsernameClaimPrefixPolicy{
	"noprefix": UsernameClaimPrefixPolicy_NoPrefix,
	"none":     UsernameClaimPrefixPolicy_None,
	"prefix":   UsernameClaimPrefixPolicy_Prefix,
}
