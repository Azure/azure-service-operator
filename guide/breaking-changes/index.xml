<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Breaking Changes on Azure Service Operator</title>
    <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/</link>
    <description>Recent content in Breaking Changes on Azure Service Operator</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <atom:link href="https://azure.github.io/azure-service-operator/guide/breaking-changes/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>v2.15.0 Breaking Changes</title>
      <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.15.0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.15.0/</guid>
      <description>&lt;h2 id=&#34;breaking-changes&#34;&gt;Breaking changes&lt;/h2&gt;&#xA;&lt;p&gt;Improvements to our code generator have resulted in some properties now being more tightly validated, with better alignment to the requirements of the associated Azure resources.&lt;/p&gt;&#xA;&lt;p&gt;Some invalid resources that were previously accepted by ASO only to fail when reconciled will now be rejected up front. Valid resources will be unaffected.&lt;/p&gt;&#xA;&lt;p&gt;Affected properties are:&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;Group&lt;/th&gt;&#xA;          &lt;th&gt;Resource&lt;/th&gt;&#xA;          &lt;th&gt;Property&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;kubernetesconfiguration&lt;/td&gt;&#xA;          &lt;td&gt;fluxConfiguration&lt;/td&gt;&#xA;          &lt;td&gt;spec.ociRepository.url&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;machinelearningservices&lt;/td&gt;&#xA;          &lt;td&gt;workspacesConnection&lt;/td&gt;&#xA;          &lt;td&gt;spec.properties.oAuth2.credentials.authUrl&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;managedidentity&lt;/td&gt;&#xA;          &lt;td&gt;federatedIdentityCredential&lt;/td&gt;&#xA;          &lt;td&gt;spec.issuer&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;</description>
    </item>
    <item>
      <title>v2.11.0 Breaking Changes</title>
      <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.11.0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.11.0/</guid>
      <description>&lt;h2 id=&#34;breaking-changes&#34;&gt;Breaking changes&lt;/h2&gt;&#xA;&lt;h4 id=&#34;moved-all-the-arm-variants-of-the-crd-types-into-dedicated-subpackages&#34;&gt;Moved all the &amp;ldquo;ARM&amp;rdquo; variants of the CRD types into dedicated subpackages&lt;/h4&gt;&#xA;&lt;p&gt;This is only breaking for consumers of the Go package, not for users of the YAML, and only for those using the ARM types directly.&lt;/p&gt;&#xA;&lt;h2 id=&#34;upcoming-breaking-changes&#34;&gt;Upcoming Breaking changes&lt;/h2&gt;&#xA;&lt;h3 id=&#34;deprecated-managedclusterscontainerserviceazurecom-api-versions&#34;&gt;Deprecated managedclusters.containerservice.azure.com API versions&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;The v1api20210501 and v1api20231102preview versions will be removed in ASO release 2.12.&lt;/li&gt;&#xA;&lt;li&gt;The v1api20230201 version will be removed in ASO release 2.13.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;We recommend you move to use a different CRD version to avoid errors.&lt;/p&gt;</description>
    </item>
    <item>
      <title>v2.10.0 Breaking Changes</title>
      <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.10.0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.10.0/</guid>
      <description>&lt;h2 id=&#34;machinelearningservicesworkspacescompute-properties-marked-as-a-secretreference&#34;&gt;MachineLearningServices/WorkspacesCompute properties marked as a SecretReference&lt;/h2&gt;&#xA;&lt;p&gt;The below properties on &lt;code&gt;WorkspacesCompute&lt;/code&gt; has been changed from a string to a &lt;code&gt;SecretReference&lt;/code&gt;&#xA;We always try to avoid breaking changes, but in this case, allowing raw passwords in the spec is a security problem and as such we&amp;rsquo;ve&#xA;decided to make a break to correct this issue.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Affected Properties:&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;SslConfiguration.Key&lt;/li&gt;&#xA;&lt;li&gt;SslConfiguration.Cert&lt;/li&gt;&#xA;&lt;li&gt;VirtualMachineSshCredentials.PrivateKeyData&lt;/li&gt;&#xA;&lt;li&gt;VirtualMachineSshCredentials.PublicKeyData&lt;/li&gt;&#xA;&lt;li&gt;DatabricksProperties.DatabricksAccessToken&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;Action required:&lt;/strong&gt; If the &lt;code&gt;MachineLearningServices/WorkspacesCompute&lt;/code&gt; resource is used in your cluster and any of the above property is set, do the following before upgrading ASO:&lt;/p&gt;</description>
    </item>
    <item>
      <title>v2.9.0 Breaking Changes</title>
      <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.9.0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.9.0/</guid>
      <description>&lt;h2 id=&#34;delegatedmanagedidentityresourceid-is-now-a-secret&#34;&gt;DelegatedManagedIdentityResourceId is now a secret&lt;/h2&gt;&#xA;&lt;p&gt;The RoleAssignment property &lt;code&gt;.spec.delegatedManagedIdentityResourceId&lt;/code&gt; has been changed from a string to a&#xA;SecretReference and renamed to &lt;code&gt;.spec.delegatedManagedIdentityResourceReference&lt;/code&gt;.&lt;/p&gt;&#xA;&lt;p&gt;We try to avoid breaking changes, but in this case, allowing raw passwords in the spec is a security&#xA;problem and as such we&amp;rsquo;ve decided to make a break to correct this issue.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Action required:&lt;/strong&gt; If the &lt;code&gt;authorization.azure.com/RoleAssignment&lt;/code&gt; resource is used in your cluster, and if you are&#xA;using the &lt;code&gt;DelegatedManagedIdentityResourceId&lt;/code&gt; property, you&amp;rsquo;ll need to change your resource to use the new&#xA;&lt;code&gt;DelegatedManagedIdentityResourceReference&lt;/code&gt; property, pulling the value from a secret.&lt;/p&gt;</description>
    </item>
    <item>
      <title>v2.8.0 Breaking Changes</title>
      <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.8.0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.8.0/</guid>
      <description>&lt;h2 id=&#34;managedcluster-property-specpropertieswindowsprofileadminpassword-is-now-a-secretreference-rather-than-a-string&#34;&gt;ManagedCluster property .spec.properties.windowsProfile.adminPassword is now a SecretReference rather than a string&lt;/h2&gt;&#xA;&lt;p&gt;The &lt;code&gt;spec.properties.windowsProfile.adminPassword&lt;/code&gt; on &lt;code&gt;ManagedCluster&lt;/code&gt; has been changed from a string to a&#xA;&lt;code&gt;SecretReference&lt;/code&gt;.&lt;/p&gt;&#xA;&lt;p&gt;We try to avoid breaking changes, but in this case, allowing raw passwords in the spec is a security&#xA;problem and as such we&amp;rsquo;ve decided to make a break to correct this issue.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Action required:&lt;/strong&gt; If the &lt;code&gt;containerservice.azure.com/ManagedCluster&lt;/code&gt; resource is used in your cluster&#xA;&lt;strong&gt;and&lt;/strong&gt; the &lt;code&gt;spec.properties.windowsProfile.adminPassword&lt;/code&gt; property is set, do the&#xA;following before upgrading ASO:&lt;/p&gt;</description>
    </item>
    <item>
      <title>v2.6.0 Breaking Changes</title>
      <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.6.0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.6.0/</guid>
      <description>&lt;h2 id=&#34;virtualmachinescaleset-protectedsettings-now-a-secretreference&#34;&gt;VirtualMachineScaleSet ProtectedSettings now a SecretReference&lt;/h2&gt;&#xA;&lt;p&gt;The property &lt;code&gt;VirtualMachineProfile.ExtensionProfile.Extension.ProtectedSettings&lt;/code&gt; on &lt;code&gt;VirtualMachineScaleSet&lt;/code&gt; has been changed from a string to a &lt;code&gt;SecretReference&lt;/code&gt;&#xA;We always try to avoid breaking changes, but in this case, allowing raw passwords in the spec is a security problem and as such we&amp;rsquo;ve&#xA;decided to make a break to correct this issue.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Action required:&lt;/strong&gt; If the &lt;code&gt;Compute/VirtualMachineScaleSet&lt;/code&gt; resource is used in your cluster and the &lt;code&gt;VirtualMachineProfile.ExtensionProfile.Extension.ProtectedSettings&lt;/code&gt; property is set, do the following before upgrading ASO:&lt;/p&gt;</description>
    </item>
    <item>
      <title>v2.4.0 Breaking Changes</title>
      <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.4.0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.4.0/</guid>
      <description>&lt;h2 id=&#34;beta-crd-versions-have-been-removed&#34;&gt;Beta CRD versions have been removed&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;You cannot successfully upgrade to v2.4.0 until you have followed the migration steps below:&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;If you have never installed a &lt;code&gt;beta&lt;/code&gt; version of ASOv2, or used an &lt;code&gt;beta&lt;/code&gt; version of a CRD, &lt;strong&gt;no action is required&lt;/strong&gt;.&#xA;If you&amp;rsquo;re not sure, run the below steps anyway. They will not do anything if beta was never used.&lt;/li&gt;&#xA;&lt;li&gt;Ensure the cluster is running the &lt;code&gt;v2.3.0&lt;/code&gt; version of ASO.&lt;/li&gt;&#xA;&lt;li&gt;Install the &lt;code&gt;v2.4.0&lt;/code&gt; version of the &lt;code&gt;asoctl&lt;/code&gt; tool by following the &lt;a href=&#34;https://azure.github.io/azure-service-operator/tools/asoctl/#installation&#34;&gt;installation instructions&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;Run &lt;code&gt;asoctl clean crds&lt;/code&gt;. This will migrate your resources to a newer version if needed and remove the &lt;code&gt;beta&lt;/code&gt; CRD&#xA;versions from the CRD &lt;code&gt;Status.StoredVersions&lt;/code&gt; collection. For more details on this command see the&#xA;&lt;a href=&#34;https://azure.github.io/azure-service-operator/tools/asoctl/#clean-crds&#34;&gt;asoctl clean crds documentation&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;Once you have successfully executed the above steps, you can upgrade to &lt;code&gt;v2.4.0&lt;/code&gt;.&lt;/p&gt;</description>
    </item>
    <item>
      <title>v2.2.0 Breaking Changes</title>
      <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.2.0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.2.0/</guid>
      <description>&lt;h2 id=&#34;managedclusters-managedclusterserviceprincipalprofilesecret-field-is-now-marked-as-a-secretreference&#34;&gt;ManagedClusters ManagedClusterServicePrincipalProfile.Secret field is now marked as a SecretReference&lt;/h2&gt;&#xA;&lt;p&gt;We always try to avoid breaking changes, but in this case, allowing raw passwords in the spec is a security problem and as such we&amp;rsquo;ve&#xA;decided to make a break to correct this issue.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Action required:&lt;/strong&gt; If the &lt;code&gt;ContainerService/ManagedClusters&lt;/code&gt; resource is used in your cluster and the &lt;code&gt;ManagedClusterServicePrincipalProfile.Secret&lt;/code&gt; property is set, do the following before upgrading ASO:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Annotate the resource with &lt;code&gt;serviceoperator.azure.com/reconcile-policy: skip&lt;/code&gt; to prevent ASO from trying to reconcile the resource while you are upgrading.&lt;/li&gt;&#xA;&lt;li&gt;Download the current YAML for the resource using &lt;code&gt;kubectl&lt;/code&gt; if you don&amp;rsquo;t have it elsewhere.&lt;/li&gt;&#xA;&lt;li&gt;Create a kubernetes secret containing the value for &lt;code&gt;ManagedClusterServicePrincipalProfile.Secret&lt;/code&gt;.&lt;/li&gt;&#xA;&lt;li&gt;Edit downloaded YAML in step 2, and add a secret key and name reference. Example &lt;a href=&#34;https://github.com/Azure/azure-service-operator/blob/main/v2/samples/compute/v1api/v1api20201201_virtualmachine.yaml#L18&#34;&gt;here&lt;/a&gt;.&lt;/li&gt;&#xA;&lt;li&gt;Delete the resource from your cluster using &lt;code&gt;kubectl delete&lt;/code&gt;. Your Azure resource will be left untouched because of the &lt;code&gt;reconcile-policy&lt;/code&gt; annotation you added above.&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://azure.github.io/azure-service-operator/guide/upgrading/&#34;&gt;Upgrade ASO&lt;/a&gt; in your cluster.&lt;/li&gt;&#xA;&lt;li&gt;Apply the updated YAML to your cluster using &lt;code&gt;kubectl apply&lt;/code&gt;. If any errors occur, address them.&lt;/li&gt;&#xA;&lt;li&gt;If the &lt;code&gt;reconcile-policy&lt;/code&gt; annotation is still present, remove it from the resource.&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;removed-un-used-status-properties&#34;&gt;Removed un-used Status properties&lt;/h2&gt;&#xA;&lt;p&gt;These fields are never returned from the service and end up being an empty string always. The changes here do not affect the users, hence &lt;strong&gt;no action is required&lt;/strong&gt;.&lt;/p&gt;</description>
    </item>
    <item>
      <title>v2.1.0 Breaking Changes</title>
      <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.1.0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.1.0/</guid>
      <description>&lt;h2 id=&#34;the-operator-no-longer-installs-crds-by-default&#34;&gt;The operator no longer installs CRDs by default&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Action required:&lt;/strong&gt; When installing ASO for the first time, you must now specify &lt;code&gt;crdPattern&lt;/code&gt; (for Helm) or &lt;code&gt;--crd-patterns&lt;/code&gt;&#xA;(in operator pod cmdline for raw YAML) to select the subset of CRDs you would like to install.&lt;/p&gt;&#xA;&lt;p&gt;When upgrading ASO, existing CRDs will be automatically updated to the new version but new CRDs added in that release&#xA;will not automatically be installed.&#xA;This means that when upgrading the operator, if you don&amp;rsquo;t want to use any CRDs newly added in that release you don&amp;rsquo;t&#xA;need to do anything.&lt;/p&gt;</description>
    </item>
    <item>
      <title>v2.0.0 Breaking Changes</title>
      <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.0.0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.0.0/</guid>
      <description>&lt;h2 id=&#34;upgrades-from-releases-prior-to-v200-beta5-are-disallowed&#34;&gt;Upgrades from releases prior to v2.0.0-beta.5 are disallowed&lt;/h2&gt;&#xA;&lt;p&gt;We changed how we manage CRDs in this release (see &lt;a href=&#34;https://github.com/Azure/azure-service-operator/pull/2769&#34;&gt;PR#2769&lt;/a&gt;), and as a result if using Helm you &lt;em&gt;must&lt;/em&gt; upgrade from v2.0.0-beta.5 to v2.0.0.&lt;/p&gt;&#xA;&lt;p&gt;You cannot upgrade from v2.0.0-beta.4 or earlier directly to v2.0.0. This is enforced with a Helm upgrade hook.&lt;/p&gt;&#xA;&lt;p&gt;This restriction is just for upgrades to the v2.0.0 version, although &lt;a href=&#34;https://azure.github.io/azure-service-operator/guide/upgrading/#recommended-upgrade-pattern&#34;&gt;we always recommend&lt;/a&gt; upgrading one version at a time.&lt;/p&gt;&#xA;&lt;h2 id=&#34;alpha-crd-versions-have-been-removed&#34;&gt;Alpha CRD versions have been removed&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;You cannot successfully upgrade to v2.0.0 until you have followed the migration steps below:&lt;/strong&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>v2.0.0-beta.4 Breaking Changes</title>
      <link>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.0.0-beta.4/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://azure.github.io/azure-service-operator/guide/breaking-changes/breaking-changes-v2.0.0-beta.4/</guid>
      <description>&lt;p&gt;In the &lt;code&gt;beta.4&lt;/code&gt; release of Azure Service Operator (ASO) we are pivoting to using Azure Swagger API Specifications as the sole source of truth for our code generator. This change brings with it a significant improvement in fidelity - the code we generate is now much closer to what the Azure Swagger API Specifications describe.&lt;/p&gt;&#xA;&lt;p&gt;Unfortunately, this change also brings with it a number of breaking changes.&lt;/p&gt;&#xA;&lt;p&gt;We expect that most users will find their resources are unaffected by these changes. However, if you are using a resource that is affected, you will need to take action to migrate your resources to the new format.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
